<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xizoa</title>

<link href="https://fonts.googleapis.com/css2?family=Grand+Hotel&display=swap" rel="stylesheet">

<style>
:root{--bg:#fafafa;--card:#fff;--text:#262626;--btn:#0095f6;--border:#dbdbdb}
body{background:var(--bg);color:var(--text);font-family:-apple-system,sans-serif;margin:0}
.hidden{display:none}
.auth-container{height:100vh;display:flex;align-items:center;justify-content:center}
.auth-card{width:350px;background:var(--card);border:1px solid var(--border);padding:30px;text-align:center}
.logo{font-family:'Grand Hotel',cursive;font-size:3rem;margin-bottom:20px}
input,textarea{width:100%;padding:10px;margin-bottom:8px;border:1px solid var(--border)}
.btn{width:100%;padding:8px;background:var(--btn);color:#fff;border:none;border-radius:6px;font-weight:600}
.social-login{margin-top:15px;display:flex;flex-direction:column;gap:8px}
.social-btn{padding:10px;border-radius:6px;font-weight:600;border:none;cursor:pointer}
.social-btn.google{background:#fff;border:1px solid #dbdbdb}
.social-btn.github{background:#24292e;color:#fff}
.app{max-width:500px;margin:auto;padding:10px}
.card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:10px;margin-bottom:10px}
</style>
</head>

<body>

<div id="authView" class="auth-container">
  <div class="auth-card">
    <div class="logo">Xizoa</div>

    <div id="loginBox">
      <input id="lUser" placeholder="Username">
      <input id="lPass" type="password" placeholder="Password">
      <button class="btn" onclick="login()">Log in</button>

      <div class="social-login">
        <button class="social-btn google" onclick="soon('Google')">Continue with Google</button>
        <button class="social-btn github" onclick="soon('GitHub')">Continue with GitHub</button>
      </div>

      <p onclick="toggle()" style="color:#0095f6;cursor:pointer">Sign up</p>
    </div>

    <div id="signupBox" class="hidden">
      <input id="rUser" placeholder="Username">
      <input id="rPass" type="password" placeholder="Password">
      <button class="btn" onclick="register()">Sign up</button>
      <p onclick="toggle()" style="color:#0095f6;cursor:pointer">Log in</p>
    </div>
  </div>
</div>

<div id="appView" class="hidden app">
  <div class="card">
    <textarea id="postText" rows="3" placeholder="Write somethingâ€¦"></textarea>
    <button class="btn" onclick="post()">Post</button>
  </div>
  <div id="feed"></div>
</div>

<script>
const API="https://api.xizoa.com";   // â† à¤¬à¤¸ à¤¯à¤¹à¥€ à¤¬à¤¦à¤²à¤¨à¤¾ à¤¹à¥ˆ
let me=null;

function toggle(){loginBox.classList.toggle("hidden");signupBox.classList.toggle("hidden")}
function soon(x){alert(x+" login coming soon ðŸš§")}

async function register(){
  await fetch(API+"/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},
    body:JSON.stringify({username:rUser.value,password:rPass.value})});
  alert("Account created");toggle();
}

async function login(){
  const r=await fetch(API+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},
    body:JSON.stringify({username:lUser.value,password:lPass.value})});
  const d=await r.json();
  if(!d.success)return alert("Login failed");
  me=d.user;
  authView.classList.add("hidden");
  appView.classList.remove("hidden");
  load();
}

async function post(){
  await fetch(API+"/posts/create",{method:"POST",headers:{"Content-Type":"application/json"},
    body:JSON.stringify({user_id:me.id,content:postText.value})});
  postText.value="";load();
}

async function load(){
  const r=await fetch(API+"/feed");const p=await r.json();
  feed.innerHTML="";
  p.forEach(x=>feed.innerHTML+=`<div class="card"><b>${x.username}</b><br>${x.content}</div>`);
}
</script>

</body>
</html>
